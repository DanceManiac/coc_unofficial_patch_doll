[animpoint@bar_visitors_animp_gen]
reach_movement = walk_noweap
use_camp = false
meet = meet@bar_visitors_animpoint_meet
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false

[animpoint@bar_visitors_animp_gen_reach]:animpoint@bar_visitors_animp_gen
combat_ignore_keep_when_attacked = false
invulnerable = false

[meet@bar_visitors_animpoint_meet]
close_snd_hello = {=check_npc_name(monolith)} nil, {=is_wounded} nil, {!is_squad_commander} nil, {=actor_enemy} nil, {=actor_has_weapon} meet_hide_weapon, meet_hello
close_snd_bye 	= {=check_npc_name(monolith)} nil, {=is_wounded} nil, {!is_squad_commander} nil, {=actor_enemy} nil, {=actor_has_weapon} nil, meet_hello
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance 	= 0
far_distance 	= 0
use = {=actor_enemy} false, {=dist_to_actor_le(3)} true, false
snd_on_use = {!dist_to_actor_le(3)} nil
meet_on_talking = false


[logic@bar_visitors_animp_01]
active = animpoint@bar_visitors_animp_01
suitable = {=npc_community(stalker)} true
prior = 60

[logic@bar_visitors_animp_02]
active = animpoint@bar_visitors_animp_02
suitable = true
prior = 60

[logic@bar_visitors_animp_03]
active = animpoint@bar_visitors_animp_03
suitable = true
prior = 60

[logic@bar_visitors_animp_04]
active = animpoint@bar_visitors_animp_04
suitable = {=check_npc_name(bar_visitors_sad_stalker)} true
prior = 180

[logic@bar_visitors_animp_05]
active = animpoint@bar_visitors_animp_05
suitable = {=check_npc_name(bar_visitors_sad_veteran)} true
prior = 180

[logic@bar_visitors_animp_06]
active = animpoint@bar_visitors_animp_06
suitable = true
prior = 60

[logic@bar_visitors_animp_07]
active = animpoint@bar_visitors_animp_07
suitable = true
prior = 60

[logic@bar_visitors_animp_08]
active = animpoint@bar_visitors_animp_08
suitable = true
prior = 60

[logic@bar_visitors_animp_09]
active = animpoint@bar_visitors_animp_09
suitable = true
prior = 60

[logic@bar_visitors_animp_10]
active = animpoint@bar_visitors_animp_10
suitable = true
prior = 60

[logic@bar_visitors_animp_11]
active = animpoint@bar_visitors_animp_11
suitable = true
prior = 60

[logic@bar_visitors_animp_12]
active = animpoint@bar_visitors_animp_12
suitable = true
prior = 60

[logic@bar_visitors_animp_13]
active = animpoint@bar_visitors_animp_13
suitable = true
prior = 60

[logic@bar_visitors_animp_14]
active = animpoint@bar_visitors_animp_14
suitable = true
prior = 60

[logic@bar_visitors_animp_15]
active = animpoint@bar_visitors_animp_15
suitable = true
prior = 60

[logic@bar_visitors_animp_16]
active = animpoint@bar_visitors_animp_16
suitable = true
prior = 60

[logic@bar_visitors_animp_17]
active = animpoint@bar_visitors_animp_17
suitable = true
prior = 60

[logic@bar_visitors_animp_18]
active = animpoint@bar_visitors_animp_18
suitable = true
prior = 60

[logic@bar_visitors_animp_19]
active = animpoint@bar_visitors_animp_19
suitable = {!surge_started} true, {!is_rain} true
prior = 60

[logic@bar_visitors_animp_20]
active = animpoint@bar_visitors_animp_20
suitable = {!surge_started} true, {!is_rain} true
prior = 60

[logic@bar_visitors_animp_21]
active = animpoint@bar_visitors_animp_21
suitable = {!surge_started} true, {!is_rain} true
prior = 60

[logic@bar_visitors_animp_22]
active = animpoint@bar_visitors_animp_22
suitable = {!surge_started} true, {!is_rain} true
prior = 60

[logic@bar_visitors_animp_23]
active = animpoint@bar_visitors_animp_23
suitable = {!surge_started} true
prior = 60

[logic@bar_visitors_animp_24]
active = animpoint@bar_visitors_animp_24
suitable = {!surge_started} true
prior = 60

[logic@bar_visitors_animp_25]
active = animpoint@bar_visitors_animp_25
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_26]
active = animpoint@bar_visitors_animp_26
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_27]
active = animpoint@bar_visitors_animp_27
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_28]
active = animpoint@bar_visitors_animp_28
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_29]
active = animpoint@bar_visitors_animp_29
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_30]
active = animpoint@bar_visitors_animp_30
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true

[logic@bar_visitors_animp_31]
active = animpoint@bar_visitors_animp_31
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_32]
active = animpoint@bar_visitors_animp_32
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true 

[logic@bar_visitors_animp_33]
active = animpoint@bar_visitors_animp_33
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60
turn_on_campfire = true

[logic@bar_visitors_animp_34]
active = animpoint@bar_visitors_animp_34
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60

[logic@bar_visitors_animp_35]
active = animpoint@bar_visitors_animp_35
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60

[logic@bar_visitors_animp_36]
active = animpoint@bar_visitors_animp_36
suitable = {=npc_community(stalker)} true, {=npc_community(csky)} true, {=npc_community(ecolog)} true
prior = 60

; NEW

[animpoint@bar_visitors_animp_01]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_01
use_camp = false
on_game_timer = 3600 | animpoint@smoke_stand_1

[animpoint@smoke_stand_1]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_smoke_stand_1
;avail_animations = smoking_stand
use_camp = true
on_game_timer = 1200 | animpoint@bar_visitors_animp_01
meet = no_meet
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor)} true
combat_ignore_keep_when_attacked = true

[animpoint@bar_visitors_animp_02]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_02
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_02_reached
use_camp = true

[animpoint@bar_visitors_animp_03]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_03
on_game_timer = 3600 | animpoint@smoke_stand_3
use_camp = true

[animpoint@smoke_stand_3]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_smoke_stand_3
avail_animations = smoking_stand
use_camp = true
on_game_timer = 1200 | animpoint@bar_visitors_animp_03
meet = no_meet
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor)} true
combat_ignore_keep_when_attacked = true

[animpoint@bar_visitors_animp_04]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_04
on_actor_in_zone = bar_no_weapon_zone | %=play_sound(bar_sad_stalker_phrases)%
avail_animations = animpoint_stay_bar_2

[animpoint@bar_visitors_animp_05]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_05
avail_animations = drunk_stand_table_2
on_actor_in_zone = bar_no_weapon_zone | %=play_sound(bar_sad_veteran_phrases)%
use_camp = false

[animpoint@bar_visitors_animp_06]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_06
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_06_reached
use_camp = true

[animpoint@bar_visitors_animp_07]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_07
avail_animations = drunk_stand_table_2
use_camp = false
meet = no_meet

[animpoint@bar_visitors_animp_08]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_08
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_08_reached
use_camp = true

[animpoint@bar_visitors_animp_09]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_09
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_09_reached
use_camp = true

[animpoint@bar_visitors_animp_10]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_10
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_10_reached
use_camp = true

[animpoint@bar_visitors_animp_11]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_11
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_11_reached
use_camp = true

[animpoint@bar_visitors_animp_12]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_12
use_camp = true
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_12_reached

[animpoint@bar_visitors_animp_13]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_13
use_camp = true
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_13_reached

[animpoint@bar_visitors_animp_14]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_14
use_camp = true
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_14_reached

[animpoint@bar_visitors_animp_15]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_15
use_camp = true
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_15_reached

[animpoint@bar_visitors_animp_16]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_16
use_camp = true
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_16_reached

[animpoint@bar_visitors_animp_17]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_17
use_camp = true
on_info = {=npc_in_zone(bar_no_weapon_zone)} animpoint@bar_visitors_animp_17_reached

[animpoint@bar_visitors_animp_18]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_visitors_animp_18
use_camp = true
meet = no_meet
on_game_timer = 3600 | animpoint@smoke_stand_2

[animpoint@smoke_stand_2]:animpoint@bar_visitors_animp_gen_reach
cover_name = bar_smoke_stand_2
;avail_animations = smoking_stand
use_camp = true
on_game_timer = 1200 | animpoint@bar_visitors_animp_18
meet = no_meet
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor)} true
combat_ignore_keep_when_attacked = true

[animpoint@bar_visitors_animp_19]
cover_name = bar_visitors_animp_19
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_20]
cover_name = bar_visitors_animp_20
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_21]
cover_name = bar_visitors_animp_21
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_22]
cover_name = bar_visitors_animp_22
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_23]
avail_animations = animpoint_stay_ohrana
cover_name = bar_visitors_animp_23
use_camp = false
meet = meet@bar_vis_all_of_mlr

[animpoint@bar_visitors_animp_24]
cover_name = bar_visitors_animp_24
use_camp = false
meet = meet@bar_vis_all_of_mlr

[animpoint@bar_visitors_animp_25]
cover_name = bar_visitors_animpoint_kamp1
use_camp = true
turn_on_campfire = true 

[animpoint@bar_visitors_animp_26]
cover_name = bar_visitors_animpoint_kamp2
use_camp = true
turn_on_campfire = true 

[animpoint@bar_visitors_animp_27]
cover_name = bar_visitors_animpoint_kamp3
use_camp = true
turn_on_campfire = true 

[animpoint@bar_visitors_animp_28]
cover_name = bar_visitors_animpoint_kamp4
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_29]
cover_name = bar_visitors_animpoint_kamp5
use_camp = true
turn_on_campfire = true 

[animpoint@bar_visitors_animp_30]
cover_name = bar_visitors_animpoint_kamp6
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_31]
cover_name = bar_visitors_animpoint_kamp7
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_32]
cover_name = bar_visitors_animpoint_kamp8
use_camp = true
turn_on_campfire = true 

[animpoint@bar_visitors_animp_33]
cover_name = bar_visitors_animpoint_kamp9
use_camp = true
turn_on_campfire = true

[animpoint@bar_visitors_animp_34]
cover_name = bar_visitors_animpoint_kamp10
use_camp = true
turn_on_campfire = true
on_info = {=is_heavy_rain} animpoint@bar_visitors_animpoint_kamp13

[animpoint@bar_visitors_animp_35]
cover_name = bar_visitors_animpoint_kamp11
use_camp = true
turn_on_campfire = true
on_info = {=is_heavy_rain} animpoint@bar_visitors_animpoint_kamp14

[animpoint@bar_visitors_animp_36]
cover_name = bar_visitors_animpoint_kamp12
use_camp = true
turn_on_campfire = true
on_info = {=is_heavy_rain} animpoint@bar_visitors_animpoint_kamp15

; For all of them

[meet@bar_vis_all_of_mlr]
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
use = true
trade_enable = true
close_distance = 0
far_distance = 0

[animpoint@bar_visitors_animp_01_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_01
use_camp = true

[animpoint@bar_visitors_animp_02_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_02
use_camp = true

[animpoint@bar_visitors_animp_03_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_03
use_camp = true

[animpoint@bar_visitors_animp_04_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_04
use_camp = true

[animpoint@bar_visitors_animp_05_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_05
use_camp = true

[animpoint@bar_visitors_animp_06_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_06
use_camp = true

[animpoint@bar_visitors_animp_07_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_07
use_camp = true

[animpoint@bar_visitors_animp_08_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_08
use_camp = true

[animpoint@bar_visitors_animp_09_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_09
use_camp = true

[animpoint@bar_visitors_animp_10_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_10
use_camp = true

[animpoint@bar_visitors_animp_11_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_11
use_camp = true

[animpoint@bar_visitors_animp_12_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_12
use_camp = true

[animpoint@bar_visitors_animp_13_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_13
use_camp = true

[animpoint@bar_visitors_animp_14_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_14
use_camp = true

[animpoint@bar_visitors_animp_15_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_15
use_camp = true

[animpoint@bar_visitors_animp_16_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_16
use_camp = true

[animpoint@bar_visitors_animp_17_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_17
use_camp = true

[animpoint@bar_visitors_animp_18_reached]:animpoint@bar_visitors_animp_gen
cover_name = bar_visitors_animp_18
use_camp = true

;------------------------------
;--------- NPC trade ----------
;------------------------------
[logic@bar_visitors_beh_trade_job_1]
active = beh@bar_visitors_beh_trade_job_1
suitable = {=npc_has_items_to_sell(bar_visitors) !surge_started} true
prior = 65

[beh@general]
meet = meet@bar_visitors_animpoint_meet
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
sound_idle = state
behavior_state = beh_move
target = waypoint
walk_dist = 100
jog_dist = 220
wait_anim = guard
walk_anim = patrol
jog_anim = patrol
run_anim = rush
delay_anim = guard

[beh@bar_visitors_beh_trade_job_1]:beh@general
;pt1 = 5000,ward | pos:130.57, -4.83, 22.85 look:130.57, -3.60, 22.85 sig:trade
pt1 = 10000,choose | pos:135.40661621094,-4.8241815567017,20.796640396118 look:134.41258442402,-4.8241815567017,20.692471385002
pt2 = 5000,zat_b14_give_artefact_act | pos:135.40661621094,-4.8241815567017,20.796640396118 look:134.41258442402,-4.8241815567017,20.692471385002 sig:trade
pt3 = 10000,guard | pos:135.40661621094,-4.8241815567017,20.796640396118 look:134.41258442402,-4.8241815567017,20.692471385002
on_signal = trade | %=trade_job_sell_items%
path_end = loop